<!doctype html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="content">

    <h2 class="fw-bold mb-4 d-flex align-items-center gap-2">
        <i class="bi bi-diagram-3"></i>
        <span>–°—Ç—Ä–∞—Ç–µ–≥–∏–∏</span>
    </h2>

    <div class="row g-4">

        <!-- –û–î–ù–ê –ö–ê–†–¢–û–ß–ö–ê –ù–ê –°–¢–†–ê–¢–ï–ì–ò–Æ -->
        <div class="col-md-4 col-sm-6" th:each="s : ${strategies}">

            <div class="card card-theme strategy-card h-100 shadow-sm"
                 th:classappend="${s.active} ? ' border-success border-2' : ''">

                <div class="card-body text-center">

                    <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ -->
                    <h5 class="strategy-title mb-2" th:text="${s.title}">Strategy</h5>

                    <!-- –°—Ç–∞—Ç—É—Å -->
                    <span class="badge px-3 py-2 mb-2"
                          th:classappend="${s.active} ? ' bg-success' : ' bg-secondary'">
                        <span th:text="${s.active} ? 'üü¢ –ê–∫—Ç–∏–≤–Ω–∞' : '‚ö´ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞'">‚ö´ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞</span>
                    </span>

                    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–∞ -->
                    <div class="small">
                        <div>
                            PnL:
                            <span th:text="${s.totalProfitPct}"
                                  th:classappend="${s.totalProfitPct >= 0} ? ' pnl-green' : ' pnl-red'">0</span>%
                        </div>
                        <div>ML –¥–æ–≤–µ—Ä–∏–µ: <strong th:text="${s.mlConfidence}">0</strong></div>
                        <div>–ü–∞—Ä–∞: <strong th:text="${s.symbol}">BTCUSDT</strong></div>
                        <div>–°–µ—Ç—å: <strong th:text="${s.networkType}">MAINNET</strong></div>
                    </div>

                    <!-- –ö–ù–û–ü–ö–ò -->
                    <div class="mt-4 d-grid gap-2">

                        <!-- üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å / –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å -->
                        <button type="button"
                                class="btn toggle-btn"
                                th:classappend="${s.active} ? ' btn-outline-danger' : ' btn-outline-success'"
                                th:data-type="${s.type}"
                                th:data-chat-id="${s.chatId}"
                                th:data-symbol="${s.symbol}"
                                th:data-active="${s.active}">
                            <i th:class="${s.active} ? 'bi bi-stop-fill' : 'bi bi-play-fill'"></i>
                            <span th:text="${s.active} ? '–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å' : '–ó–∞–ø—É—Å—Ç–∏—Ç—å'">–ó–∞–ø—É—Å—Ç–∏—Ç—å</span>
                        </button>

                        <!-- üìä –î–∞—à–±–æ—Ä–¥ -->
                        <a class="btn btn-outline-primary"
                           th:href="@{'/strategies/' + ${s.type} + '/strategy_dashboard'(chatId=${s.chatId}, symbol=${s.symbol})}">
                            <i class="bi bi-graph-up"></i> –î–∞—à–±–æ—Ä—Ç
                        </a>


                        <!-- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–ò–°–ü–†–ê–í–õ–ï–ù–û) -->
                        <a class="btn btn-outline-primary"
                           th:href="@{'/strategies/' + ${s.type} + '/config'(chatId=${s.chatId})}">
                            <i class="bi bi-gear"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                        </a>

                    </div>

                </div>
            </div>

        </div>

    </div>

</div>

</body>
</html>

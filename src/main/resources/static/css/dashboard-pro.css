/* ====== Layout base ====== */
:root {
    --sidebar-w: 250px;
    --sidebar-w-collapsed: 70px;
    --bg: #0e1117;
    --panel: #10131a;
    --panel-2: #1a1f2b;
    --text: #e9ecef;
    --muted: #8b95a5;
    --accent: #1db954;
}

html, body {
    height: 100%;
}
body {
    background: var(--bg);
    color: var(--text);
    font-family: "Inter", "Segoe UI", sans-serif;
    transition: background .25s ease, color .25s ease;
}

/* ====== Sidebar ====== */
#sidebar {
    width: var(--sidebar-w);
    background: var(--panel-2);
    min-height: 100vh;
    position: fixed;
    top: 0;
    left: 0;
    overflow-x: hidden;
    overflow-y: auto;
    transition: width .25s ease, transform .25s ease;
    z-index: 1050;
    box-shadow: 2px 0 10px rgba(0, 0, 0, .25);
}

/* ====== Brand ====== */
#sidebar .brand {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: .5rem;
    height: 60px;
    border-bottom: 1px solid rgba(255, 255, 255, .06);
    overflow: hidden;
    white-space: nowrap;
}
#sidebar .brand i { transform: translateZ(0); }
#sidebar .brand span { transition: opacity .2s ease; }

/* ====== Navigation ====== */
#sidebar .nav {
    padding: 0 .25rem .75rem;
}

#sidebar .nav-link {
    color: #cfd6e4;
    display: flex;
    align-items: center;
    gap: .75rem;
    padding: .6rem .9rem;
    border-radius: .5rem;
    margin: .25rem .5rem;
    transition: background .15s ease, color .15s ease;
    white-space: nowrap;
    position: relative;
}
#sidebar .nav-link i {
    width: 1.5rem;
    text-align: center;
    font-size: 1.15rem;
}
#sidebar .nav-link:hover {
    background: rgba(29,185,84,.15);
    color: #1db954;
}
#sidebar .nav-link.active {
    background: var(--accent);
    color: #fff;
}
#sidebar .nav-link.active i {
    filter: drop-shadow(0 0 6px rgba(29,185,84,.5));
}

/* ====== Collapsed Sidebar ====== */
#sidebar.collapsed {
    width: var(--sidebar-w-collapsed);
}
#sidebar.collapsed .brand span {
    opacity: 0;
    display: none;
}
#sidebar.collapsed .nav-link span {
    display: none;
}
#sidebar.collapsed .nav-link {
    justify-content: center;
}
#sidebar.collapsed .nav-link i {
    margin-right: 0;
}

/* ====== Theme button ====== */
#sidebar .btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: .4rem;
    transition: all .2s ease;
    white-space: nowrap;
}
#sidebar.collapsed #toggleTheme {
    justify-content: center;
    padding: .6rem 0;
}
#sidebar.collapsed #toggleTheme span,
#sidebar.collapsed #toggleTheme::after {
    display: none;
    opacity: 0;
    width: 0;
}

/* ====== Content ====== */
#content {
    margin-left: var(--sidebar-w);
    transition: margin-left .25s ease;
    padding: 2rem;
}
#sidebar.collapsed ~ #content {
    margin-left: var(--sidebar-w-collapsed);
}

/* ====== Topbar ====== */
#topbar {
    position: sticky;
    top: 0;
    background: var(--panel);
    color: var(--text);
    border-bottom: 1px solid rgba(255,255,255,.05);
    padding: .75rem 1rem;
    z-index: 1000;
    border-radius: .5rem;
    transition: background .25s ease, color .25s ease;
}

/* ====== Cards / Buttons / Footer ====== */
.card-theme {
    background: linear-gradient(180deg, #121826 0%, #0f1522 100%);
    border: 1px solid rgba(255, 255, 255, .06);
    color: var(--text);
    border-radius: .8rem;
    transition: background .25s ease, color .25s ease, border-color .25s ease;
}
.card-theme .muted { color: var(--muted); }

.btn-theme {
    background: var(--accent);
    border-color: var(--accent);
    color: #fff;
}
.btn-theme:hover { filter: brightness(1.05); }

footer {
    color: #7f8ba2;
    font-size: .85rem;
}

/* ====== Tooltip Styling ====== */
.tooltip-inner {
    background-color: #1c1f27;
    color: #fff;
    font-size: 0.75rem;
    padding: .4rem .6rem;
    border-radius: .4rem;
}
.tooltip.bs-tooltip-auto[x-placement^="right"] .tooltip-arrow::before,
.tooltip.bs-tooltip-end .tooltip-arrow::before {
    border-right-color: #1c1f27 !important;
}

/* ====== Темы ====== */

/* === Тёмная (по умолчанию) === */
body[data-theme='dark'] {
    --bg: #0e1117;
    --panel: #10131a;
    --panel-2: #1a1f2b;
    --text: #e9ecef;
    --muted: #8b95a5;
    --accent: #1db954;
    background: var(--bg);
    color: var(--text);
}
body[data-theme='dark'] #sidebar {
    background: var(--panel-2);
}
body[data-theme='dark'] #topbar {
    background: var(--panel);
    color: #fff;
    border-color: rgba(255,255,255,.08);
}
body[data-theme='dark'] .nav-link:hover {
    background: rgba(29,185,84,.15);
    color: #1db954;
}

/* === Светлая === */
body[data-theme='light'] {
    --bg: #f8f9fa;
    --panel: #ffffff;
    --panel-2: #ffffff;
    --text: #212529;
    --muted: #201a1a;
    --accent: #1db954;
    background: var(--bg);
    color: var(--text);
}
body[data-theme='light'] #sidebar {
    background: var(--panel-2);
    border-right: 1px solid #dee2e6;
}
body[data-theme='light'] #topbar {
    background: #ffffff;
    color: #212529;
    border-color: #dee2e6;
}
body[data-theme='light'] .nav-link {
    color: #333;
}
body[data-theme='light'] .nav-link:hover {
    background: rgba(29,185,84,.15);
    color: #1db954;
}
body[data-theme='light'] .nav-link.active {
    background: var(--accent);
    color: #fff;
}
body[data-theme='light'] .card-theme {
    background: #ffffff;
    color: #212529;
    border-color: #dee2e6;
}
body[data-theme='light'] footer {
    color: #6c757d;
}
/* ====== Fix muted text for dark mode ====== */
body[data-theme='dark'] .text-muted {
    color: rgba(255,255,255,.7) !important;
}
body[data-theme='light'] .text-muted {
    color: #191212 !important;
}

/* ====== Smooth transition for topbar & links ====== */
#topbar, #sidebar .nav-link, footer, .card-theme {
    transition: background .25s ease, color .25s ease, border-color .25s ease;
}

/* ====== Ensure hover/active color works in all themes ====== */
#sidebar .nav-link:hover {
    background: rgba(29,185,84,.15);
    color: #1db954;
}
#sidebar .nav-link.active {
    background: var(--accent);
    color: #fff;
}
.subchart {
    background: #0e0f11;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.04);
}

.market-profile {
    background: #0e0f11;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.04);
    padding: 4px 4px 4px 0;
    font-size: 10px;
}



# ARCHITECTURE_AUDIT.md

## üß† –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –ø—Ä–æ–µ–∫—Ç–∞ AiTradeBot

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ –∏–Ω—Å–ø–µ–∫—Ü–∏–π IntelliJ IDEA (unused declarations, duplicate code, orphan classes) –∏ –æ–±—â–µ–º –∞—É–¥–∏—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã v3 ‚Üí v4.

–î–æ–∫—É–º–µ–Ω—Ç ‚Äî —á–µ–∫–ª–∏—Å—Ç —Å –≥–∞–ª–æ—á–∫–∞–º–∏, –≥–¥–µ –∫–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, —É–¥–∞–ª–µ–Ω–∏—è –º—É—Å–æ—Ä–∞, —á–∏—Å—Ç–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –∏ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ V4.

---

# 1. –û–±—â–∏–π –≤—ã–≤–æ–¥

- –ö–æ–¥–æ–≤–∞—è –±–∞–∑–∞ —Å–∏–ª—å–Ω–æ –≤—ã—Ä–æ—Å–ª–∞ ‚Üí –º–Ω–æ–≥–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∫–ª–∞—Å—Å–æ–≤.
- –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥—É–±–ª–∏—Ä—É—é—Ç –ª–æ–≥–∏–∫—É –∏ –Ω–µ –∏–º–µ—é—Ç –µ–¥–∏–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
- SmartFusion —Ö—Ä–∞–Ω–∏—Ç –¥–µ—Å—è—Ç–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–ª–æ–≤–∏–Ω–∞ —Ä–µ–∞–ª—å–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
- –ò–º–µ–µ—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π, —Å—Ç–∞—Ä—ã—Ö API, –¥—É–±–ª–µ–π —Å–µ—Ä–≤–∏—Å–æ–≤.
- UI + Dashboard + JS –º–æ–¥—É–ª–∏ —Ö–∞–æ—Ç–∏—á–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã.
- Orchestrator –∏ StrategyRegistry –µ—Å—Ç—å, –Ω–æ –Ω–µ –¥–æ–≤–µ–¥–µ–Ω—ã –¥–æ –∫–æ–Ω—Ü–∞.
- DTO StrategyRunInfo —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏—à–Ω–∏–µ –ø–æ–ª—è.
- Web API —á–∞—Å—Ç–∏—á–Ω–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ.

---

# 2. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (High Priority)

## 2.1. StrategyRegistry / Orchestrator
- [ ] –ö–ª–∞—Å—Å StrategyRegistry –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è.
- [ ] –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.
- [ ] –ù—É–∂–Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π.
- [ ] –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–±—Ä–∞—Ç—å ¬´–≤–∏—Å—è—â—É—é¬ª –ª–æ–≥–∏–∫—É –∏ —Å—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã.

## 2.2. SmartFusionStrategySettings
- [ ] –ü–æ–ª–æ–≤–∏–Ω–∞ –ø–æ–ª–µ–π –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ "never used".
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ –æ—Ç—Ä–∞–∂–µ–Ω—ã –≤ –ª–æ–≥–∏–∫–µ SmartFusionStrategy.
- [ ] –¢—Ä–µ–±—É–µ—Ç—Å—è –æ—á–∏—Å—Ç–∏—Ç—å –ë–î-—Å—Ö–µ–º—É.
- [ ] RL-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∞—Å—Ç–∏—á–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ –º–æ–≥—É—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã/–æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã.

## 2.3. Web API
- [ ] –°—Ç–∞—Ä—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥—É–±–ª–∏—Ä—É—é—Ç `/api/strategy` –∏ `/api/chart`.
- [ ] –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.
- [ ] –ù—É–∂–Ω–æ —Å–≤–µ—Å—Ç–∏ API –∫ –µ–¥–∏–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.

## 2.4. UI Dashboard
- [ ] JS —Ä–∞–∑–±—Ä–æ—Å–∞–Ω –ø–æ –æ–≥—Ä–æ–º–Ω—ã–º —Ñ–∞–π–ª–∞–º.
- [ ] –ö–æ–Ω—Ç—Ä–æ–ª—ã –≥—Ä–∞—Ñ–∏–∫–∞, live-data, —Ç–∞–±–ª–∏—Ü–∞ —Å–¥–µ–ª–æ–∫ ‚Äî –≤—Å—ë —Å–ª–∏—Ç–æ –≤ –æ–¥–∏–Ω –º–æ–¥—É–ª—å.
- [ ] –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–¥—É–ª–∏.

---

# 3. –ü—Ä–æ–±–ª–µ–º—ã —Å—Ä–µ–¥–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏ (Medium)

## 3.1. DTO –∏ Entities
- [ ] StrategyRunInfo —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏—à–Ω–∏–µ –ø–æ–ª—è.
- [ ] –ß–∞—Å—Ç–∏—á–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≥–µ—Ç—Ç–µ—Ä—ã.
- [ ] –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ JPA –∏–º–µ—é—Ç –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—É—Å—Ç—É—é—Ç –≤ –ë–î.

## 3.2. Duplicate Code
- [ ] –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –≤ API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö.
- [ ] –ü–æ—Ö–æ–∂–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ä–¥–µ—Ä–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ö.
- [ ] –°—Ç–∞—Ä—ã–µ –∫–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–ø–∏—Ä—É—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤.

## 3.3. JS / Frontend
- [ ] –ú–æ–¥—É–ª–∏ –≥—Ä–∞—Ñ–∏–∫–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω—ã:
  - chart.js
  - controls.js
  - table.js
  - ws.js
  - stats.js

---

# 4. –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (Low)

- [ ] –£–¥–∞–ª–∏—Ç—å –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –∏ TODO.
- [ ] –°—Ç–∞—Ä—ã–µ —Ç–µ—Å—Ç—ã –±–µ–∑ –∞—Å—Å–µ—Ä—Ç–æ–≤.
- [ ] –ù–µ—Å–∫–æ–ª—å–∫–æ —É—Ç–∏–ª–∏—Ç –¥—É–±–ª–∏—Ä—É—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å Java.
- [ ] –ù–µ—Å–∫–æ–ª—å–∫–æ legacy –∫–æ–Ω—Ñ–∏–≥–æ–≤ (v1/v2) –æ—Å—Ç–∞–ª–∏—Å—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–µ–∑–¥–∞ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

---

# 5. –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è –¥–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## –≠—Ç–∞–ø 1 ‚Äî –ß–∏—Å—Ç–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [ ] –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –ø–æ–º–µ—Ç–∏—Ç—å deprecated: SmartFusion v1/v2.
- [ ] –û—á–∏—Å—Ç–∏—Ç—å StrategyRegistry.
- [ ] –ü—Ä–∏–≤–µ—Å—Ç–∏ Orchestrator –≤ —Ä–∞–±–æ—á–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–ª–∏ –≤—ã–Ω–µ—Å—Ç–∏ –≤ legacy.

## –≠—Ç–∞–ø 2 ‚Äî –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- [ ] –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å TradingStrategy.
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–¥ –Ω–µ–≥–æ.
- [ ] –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å StrategyContext.

## –≠—Ç–∞–ø 3 ‚Äî UI –∏ dashboard
- [ ] –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å JS.
- [ ] –£–±—Ä–∞—Ç—å –≤—Å—ë –ª–∏—à–Ω–µ–µ –∏–∑ strategy-chart.js.
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å.

## –≠—Ç–∞–ø 4 ‚Äî API
- [ ] –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ API.
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã.
- [ ] –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π /api/strategy –∏ /api/chart.

## –≠—Ç–∞–ø 5 ‚Äî SmartFusion
- [ ] –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è.
- [ ] –ü—Ä–∏–≤–µ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫ —Ä–µ–∞–ª—å–Ω—ã–º –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º.
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

## –≠—Ç–∞–ø 6 ‚Äî –§–∏–Ω–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ legacy.
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤.
- [ ] –£–ø—Ä–æ—â–µ–Ω–∏–µ DTO.

---

# 6. –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è/—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

## –ú—É—Å–æ—Ä / –•–ª–∞–º / Legacy
- [ ] SmartFusion v1/v2 (–µ—Å–ª–∏ –µ—â—ë –≤ –ø—Ä–æ–µ–∫—Ç–µ)
- [ ] –°—Ç–∞—Ä—ã–µ API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
- [ ] –ö–ª–∞—Å—Å TimeUtil –µ—Å–ª–∏ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- [ ] –õ–∏—à–Ω–∏–µ DTO
- [ ] –ü—É—Å—Ç—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- [ ] –°—Ç–∞—Ä—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏-–ø—É—Å—Ç—ã—à–∫–∏

## –î—É–±–ª–∏—Ä—É—é—â–∏–µ –∫–ª–∞—Å—Å—ã
- [ ] ExchangeSettingsService (–¥—É–±–ª—å)
- [ ] –ù–µ—Å–∫–æ–ª—å–∫–æ Candle —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] –°—Ç–∞—Ä—ã–µ Order —Å–µ—Ä–≤–∏—Å—ã

## –ö–ª–∞—Å—Å—ã-–∫–∞–Ω–¥–∏–¥–∞—Ç—ã –Ω–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫—É
- [ ] StrategyRegistry
- [ ] AiStrategyOrchestrator
- [ ] StrategyRunInfo
- [ ] SmartFusionStrategy
- [ ] SmartFusionSettings

---

# 7. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞

## –°—Ç—Ä–∞—Ç–µ–≥–∏–∏
```
strategy/
  smartfusion/
  scalping/
  rsi_ema/
  fibonacci/
  ml_invest/
  common/
```

## –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
```
web/
  controller/
    dashboard/
    api/
```

## Exchange / Market
```
exchange/
market/
order/
```

## JS
```
resources/static/js/dashboard/
  chart.js
  controls.js
  ws.js
  stats.js
  table.js
```

---

# 8. –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –æ—á–µ–Ω—å —Å–∏–ª—å–Ω—ã–π, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç:
- –≤—ã—á–∏—Å—Ç–∏—Ç—å ¬´–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –º—É—Å–æ—Ä¬ª
- —Å–≤–µ—Å—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫ –æ–¥–Ω–æ–º—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É
- –¥–æ–ø–∏–ª–∏—Ç—å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
- –ø—Ä–∏–≤–µ—Å—Ç–∏ API –≤ –ø–æ—Ä—è–¥–æ–∫
- —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø–ª–∞–Ω–∞ –ø—Ä–æ–µ–∫—Ç —Å—Ç–∞–Ω–µ—Ç:
- –ª–µ–≥—á–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- –ø—Ä–æ—â–µ —Ä–∞–∑–≤–∏–≤–∞—Ç—å
- –º–æ–¥—É–ª—å–Ω—ã–º
- –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º
- –≥–æ—Ç–æ–≤—ã–º –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥ 10 000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
